close all
clear
clc

%%
robot = wam7robot

n = robot.nDOF;

A = zeros(6,n);
for i=1:n
    A(:,i) = robot.link(i).screw;
end

M = zeros(4,4,n);
for i=1:n
    M(:,:,i) = inverse_SE3(robot.link(i).M);
end

par = [0.294863503
0.007950225
9.31E-05
0.113500168
0.000187103
0.25065343
-0.047746296
1.312477649
-0.007159328
10.76768767
0.0260684
1.35E-05
0.000117001
0.014722017
-3.66E-05
0.019348137
-0.009182943
0.120340603
0.059755955
3.87493756
0.13671601
0.016804342
-5.10E-06
0.005883535
5.29E-06
0.139513702
-0.068952728
0.37398727
5.96E-05
1.80228141
0.057192689
-1.47E-05
-8.19E-05
0.05716471
9.42E-05
0.003004404
0.011965126
-0.000550647
0.31854219
2.40016804
5.59E-05
-2.56E-07
1.88E-09
7.82E-05
8.33E-07
6.59E-05
1.10E-05
0.000632683
0.000539377
0.12376019
0.000931067
-1.48E-06
2.01E-06
0.000498334
0.000221618
0.000574835
-5.13E-05
-0.007118902
0.010316994
0.41797364
3.85E-05
1.91E-07
-1.77E-08
3.88E-05
3.62E-08
7.41E-05
-5.47E-06
1.12E-05
-0.00022211
0.06864753];

cum_phi = zeros(70,1);
for i=1:7
    phi = zeros(10,1);
    
    phi(1) = par(10*(i-1) + 10);
    phi(2) = par(10*(i-1) + 7);
    phi(3) = par(10*(i-1) + 8);
    phi(4) = par(10*(i-1) + 9);
    phi(5) = par(10*(i-1) + 1);
    phi(6) = par(10*(i-1) + 4);
    phi(7) = par(10*(i-1) + 6);
    phi(8) = par(10*(i-1) + 2);
    phi(9) = par(10*(i-1) + 5);
    phi(10) = par(10*(i-1) + 3);    
    
    cum_phi(10*(i-1)+1:10*(i), 1) = phi;
end
